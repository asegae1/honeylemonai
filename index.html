<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>honeylemonai - Creator Edition</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
  <style>
    :root { 
      --main: #FFD700; --accent: #FFA500; --bg: #fffdf0; --panel: #ffffff; --txt: #333; 
      --shadow: 0 8px 30px rgba(0,0,0,0.08); --radius: 20px;
    }
    body.dark { 
      --main: #FFD700; --accent: #FF8C00; --bg: #0a0a0a; --panel: #1a1a1a; --txt: #f0f0f0; 
      --shadow: 0 8px 30px rgba(0,0,0,0.4);
    }

    body { font-family: 'Inter', system-ui, sans-serif; background: var(--bg); color: var(--txt); margin: 0; height: 100vh; display: flex; flex-direction: column; transition: 0.4s ease; overflow: hidden; }
    
    /* Header */
    .header { background: var(--panel); padding: 12px 20px; display: flex; align-items: center; justify-content: space-between; box-shadow: var(--shadow); z-index: 10; }
    .logo-area { display: flex; align-items: center; gap: 8px; font-weight: 900; font-size: 20px; background: linear-gradient(135deg, var(--main), var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    
    /* Custom Settings Grid */
    .settings-panel { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; padding: 15px 20px; background: var(--panel); border-bottom: 1px solid rgba(0,0,0,0.05); }
    
    .setting-item { display: flex; flex-direction: column; gap: 5px; }
    .label-sm { font-size: 10px; font-weight: 800; color: var(--accent); text-transform: uppercase; }
    
    input[type="text"], select { 
      border: 1.5px solid rgba(0,0,0,0.1); border-radius: 10px; padding: 8px 12px; 
      font-size: 13px; background: var(--bg); color: var(--txt); outline: none; transition: 0.2s;
    }
    input[type="text"]:focus { border-color: var(--main); box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.2); }

    /* Chat Area */
    #chat-box { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; }
    .msg { max-width: 80%; padding: 14px 18px; border-radius: var(--radius); font-size: 15px; line-height: 1.6; animation: fadeIn 0.3s ease; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    
    .user { align-self: flex-end; background: linear-gradient(135deg, var(--main), var(--accent)); color: #fff; border-bottom-right-radius: 4px; box-shadow: 0 4px 15px rgba(255, 215, 0, 0.2); }
    .ai { align-self: flex-start; background: var(--panel); border: 1px solid rgba(0,0,0,0.05); border-bottom-left-radius: 4px; box-shadow: 0 4px 15px rgba(0,0,0,0.02); }

    /* Footer Input */
    .input-wrapper { background: var(--panel); padding: 20px; box-shadow: 0 -5px 25px rgba(0,0,0,0.03); }
    .main-input-group { max-width: 1000px; margin: 0 auto; display: flex; items-center: center; gap: 12px; }
    
    .send-btn { 
      background: var(--main); border: none; width: 48px; height: 48px; border-radius: 50%; 
      cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 20px;
      transition: 0.3s; box-shadow: 0 4px 12px rgba(255, 215, 0, 0.4);
    }
    .send-btn:hover { transform: scale(1.1) rotate(5deg); }
    .send-btn:disabled { background: #ccc; box-shadow: none; }

    .status-info { display: flex; justify-content: space-between; font-size: 10px; margin-top: 10px; opacity: 0.6; font-weight: bold; }
  </style>
</head>
<body class="theme-ja">

<div class="header">
  <div class="logo-area">ğŸ‹ honeylemonai</div>
  <button onclick="toggleTheme()" id="themeBtn" style="background:none; border:none; cursor:pointer; font-size:18px;">ğŸŒ™</button>
</div>

<div class="settings-panel">
  <div class="setting-item">
    <span class="label-sm">Language / è¨€èª</span>
    <select id="langSelect" onchange="updateUI()">
      <option value="ja">æ—¥æœ¬èª</option>
      <option value="en">English</option>
      <option value="zh">Chinese</option>
      <option value="fr">French</option>
      <option value="ar">Arabic</option>
    </select>
  </div>
  <div class="setting-item" style="flex: 2;">
    <span class="label-sm">AI Personality / AIã®æ€§æ ¼ï¼ˆè‡ªç”±ã«è¨˜è¿°ï¼‰</span>
    <input type="text" id="personalityInput" placeholder="ä¾‹: ãƒ„ãƒ³ãƒ‡ãƒ¬ã§æ¯’èˆŒãªãƒ¬ãƒ¢ãƒ³ã€ä¸å¯§ãªåŸ·äº‹ãªã©...">
  </div>
  <div class="setting-item">
    <span class="label-sm">Mode / ãƒ¢ãƒ¼ãƒ‰</span>
    <select id="modeSelect">
      <option value="chat">Chat (ä¼šè©±)</option>
      <option value="image">Image (ç”»åƒç”Ÿæˆ)</option>
    </select>
  </div>
</div>

<div id="chat-box"></div>

<div class="input-wrapper">
  <div class="main-input-group">
    <label style="cursor:pointer; font-size:24px;">ğŸ“<input type="file" id="fileInput" style="display:none" onchange="handleFile()"></label>
    <input id="input" type="text" placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›..." onkeypress="if(event.key==='Enter') run()">
    <button class="send-btn" id="sendBtn" onclick="run()">ğŸ‹</button>
  </div>
  <div class="status-info">
    <div id="rate-count">RATE: 4/4 (1min reset)</div>
    <div id="file-name">NO ATTACHMENT</div>
  </div>
</div>

<script>
  let imageCount = 4;
  let currentFile = { name: "", data: "", text: "" };

  function toggleTheme() {
    const isDark = document.body.classList.toggle('dark');
    document.getElementById('themeBtn').innerText = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
  }

  function updateUI() {
    const lang = document.getElementById('langSelect').value;
    const placeholders = { ja: "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›...", en: "Type a message...", zh: "è¾“å…¥æ¶ˆæ¯...", fr: "Ã‰crire...", ar: "Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø©..." };
    document.getElementById('input').placeholder = placeholders[lang] || placeholders.en;
  }

  async function handleFile() {
    const file = document.getElementById('fileInput').files[0];
    if (!file) return;
    currentFile.name = file.name;
    document.getElementById('file-name').innerText = `ATTACHED: ${file.name.toUpperCase()}`;
    // â€»ã“ã“ã«PDF/ç”»åƒè§£æãƒ­ã‚¸ãƒƒã‚¯ï¼ˆçœç•¥ï¼‰
  }

  async function run() {
    const mode = document.getElementById('modeSelect').value;
    const personality = document.getElementById('personalityInput').value;
    const lang = document.getElementById('langSelect').value;
    
    if (mode === 'image' && imageCount <= 0) {
      addMsg("ç”»åƒç”Ÿæˆã®ãƒªãƒŸãƒƒãƒˆã§ã™ã€‚1åˆ†å¾…ã£ã¦ãã ã•ã„ã€‚", "ai");
      return;
    }

    const input = document.getElementById('input');
    if (!input.value && !currentFile.name) return;

    addMsg(input.value || `Analyzing ${currentFile.name}...`, 'user');
    
    // APIé€ä¿¡æ™‚ã« personality, lang, mode ã‚’ä¸€ç·’ã«é£›ã°ã™
    console.log("Sending with:", { personality, lang, mode });

    if (mode === 'image') {
      imageCount--;
      document.getElementById('rate-count').innerText = `RATE: ${imageCount}/4`;
    }
    input.value = "";
  }

  function addMsg(t, type) {
    const b = document.getElementById('chat-box');
    const d = document.createElement('div');
    d.className = `msg ${type}`; d.innerText = t;
    b.appendChild(d); b.scrollTop = b.scrollHeight;
  }
</script>
</body>
</html>
