<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>honeylemonai - Ultimate Custom</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
  <style>
    /* --- CSSå¤‰æ•°: ãƒ‡ã‚¶ã‚¤ãƒ³ã®æ ¸ --- */
    :root { 
      --main: #FFD700; --accent: #FFA500; --bg: #fffdf0; --panel: #ffffff; --txt: #333; 
      --shadow: rgba(0,0,0,0.1); --radius: 24px;
    }
    body.dark { 
      --main: #FFD700; --accent: #FF8C00; --bg: #0f0f0f; --panel: #1e1e1e; --txt: #f0f0f0; 
      --shadow: rgba(0,0,0,0.5);
    }

    /* --- å…¨ä½“ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ --- */
    body { font-family: 'Inter', system-ui, -apple-system, sans-serif; background: var(--bg); color: var(--txt); margin: 0; height: 100vh; display: flex; flex-direction: column; transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
    
    /* --- ãƒ˜ãƒƒãƒ€ãƒ¼: CSSã®ã¿ã§ãƒ­ã‚´ä½œæˆ --- */
    .header { background: var(--panel); padding: 15px 25px; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 4px 20px var(--shadow); z-index: 10; }
    .logo-container { display: flex; align-items: center; gap: 10px; }
    .logo-mark { width: 30px; height: 30px; background: var(--main); border-radius: 50% 50% 50% 10%; transform: rotate(-15deg); box-shadow: inset -5px -5px 10px var(--accent); }
    .logo-text { font-weight: 900; font-size: 22px; letter-spacing: -1px; background: linear-gradient(135deg, var(--main), var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    
    /* --- è¨­å®šãƒ‘ãƒãƒ« --- */
    .settings-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; padding: 10px 20px; background: var(--panel); border-bottom: 1px solid var(--shadow); }
    select { border: 1px solid #ddd; border-radius: 12px; padding: 8px; font-size: 12px; background: var(--bg); color: var(--txt); outline: none; transition: 0.2s; }
    select:hover { border-color: var(--main); }

    /* --- ãƒãƒ£ãƒƒãƒˆã‚¨ãƒªã‚¢ --- */
    #chat-box { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 20px; }
    .msg { max-width: 75%; padding: 14px 20px; border-radius: var(--radius); font-size: 15px; line-height: 1.6; position: relative; animation: slideUp 0.3s ease-out; }
    @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    
    .user { align-self: flex-end; background: linear-gradient(135deg, var(--main), var(--accent)); color: #fff; border-bottom-right-radius: 4px; box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3); }
    .ai { align-self: flex-start; background: var(--panel); border: 1px solid var(--shadow); border-bottom-left-radius: 4px; box-shadow: 0 5px 15px var(--shadow); }

    /* --- å…¥åŠ›ã‚¨ãƒªã‚¢ --- */
    .input-wrapper { background: var(--panel); padding: 20px 30px; box-shadow: 0 -5px 25px var(--shadow); }
    .input-container { max-width: 900px; margin: 0 auto; display: flex; align-items: center; gap: 15px; position: relative; }
    
    input[type="text"] { flex: 1; padding: 15px 25px; border-radius: 30px; border: 2px solid #eee; background: var(--bg); color: var(--txt); font-size: 16px; outline: none; transition: 0.3s; }
    input[type="text"]:focus { border-color: var(--main); box-shadow: 0 0 0 4px rgba(255, 215, 0, 0.1); }
    
    .action-btn { background: var(--main); border: none; width: 50px; height: 50px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.3s; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    .action-btn:hover { transform: scale(1.1) rotate(5deg); background: var(--accent); }
    
    .status-bar { display: flex; justify-content: space-between; font-size: 11px; margin-top: 10px; color: #888; font-weight: bold; }
  </style>
</head>
<body class="theme-ja">

<div class="header">
  <div class="logo-container">
    <div class="logo-mark"></div>
    <div class="logo-text">honeylemonai</div>
  </div>
  <div style="display:flex; gap:15px; align-items:center;">
    <button onclick="toggleTheme()" id="themeBtn" style="background:none; border:none; cursor:pointer; font-size:20px;">ğŸŒ™</button>
  </div>
</div>

<div class="settings-grid">
  <select id="langSelect" onchange="updateUI()">
    <option value="ja">Language: æ—¥æœ¬èª ğŸ‡¯ğŸ‡µ</option>
    <option value="en">Language: English ğŸ‡ºğŸ‡¸</option>
    <option value="ko">Language: í•œêµ­ì–´ ğŸ‡°ğŸ‡·</option>
    <option value="zh">Language: ä¸­æ–‡ ğŸ‡¨ğŸ‡³</option>
    <option value="fr">Language: FranÃ§ais ğŸ‡«ğŸ‡·</option>
    <option value="es">Language: EspaÃ±ol ğŸ‡ªğŸ‡¸</option>
  </select>
  <select id="personalitySelect">
    <option value="friendly">æ€§æ ¼: ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ï¼ˆå„ªã—ãä¸å¯§ï¼‰</option>
    <option value="cool">æ€§æ ¼: ã‚¯ãƒ¼ãƒ«ï¼ˆå†·é™ãƒ»ç°¡æ½”ï¼‰</option>
    <option value="tsundere">æ€§æ ¼: ãƒ„ãƒ³ãƒ‡ãƒ¬ï¼ˆç´ ç›´ã˜ã‚ƒãªã„ï¼‰</option>
    <option value="expert">æ€§æ ¼: å°‚é–€å®¶ï¼ˆè«–ç†çš„ãƒ»è©³ç´°ï¼‰</option>
  </select>
  <select id="modeSelect">
    <option value="chat">ãƒ¢ãƒ¼ãƒ‰: ä¼šè©±ï¼ˆGroq/Geminiï¼‰</option>
    <option value="image">ãƒ¢ãƒ¼ãƒ‰: ç”»åƒç”Ÿæˆï¼ˆ1åˆ†4å›ã¾ã§ï¼‰</option>
  </select>
</div>

<div id="chat-box"></div>

<div class="input-wrapper">
  <div class="input-container">
    <label style="cursor:pointer; font-size:24px;" title="ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ·»ä»˜">ğŸ“<input type="file" id="fileInput" style="display:none" onchange="handleFile()"></label>
    <input id="input" type="text" placeholder="ä½•ã‚’ãŠæ‰‹ä¼ã„ã—ã¾ã—ã‚‡ã†ã‹ï¼Ÿ" autocomplete="off" onkeypress="if(event.key==='Enter') run()">
    <button class="action-btn" id="sendBtn" onclick="run()">ğŸ‹</button>
  </div>
  <div class="status-bar">
    <div id="rate-display">RATE: 4 / 4 (FREE)</div>
    <div id="file-status">NO FILE ATTACHED</div>
  </div>
</div>

<script>
  let imageCount = 4;
  let currentFile = { name: "", data: "", text: "" };
  const i18n = {
    ja: { logo: "honeylemonai", place: "ä½•ã‚’ãŠæ‰‹ä¼ã„ã—ã¾ã—ã‚‡ã†ã‹ï¼Ÿ", theme: "ja" },
    en: { logo: "HONEY LEMON AI", place: "How can I help you?", theme: "en" },
    ko: { logo: "í—ˆë‹ˆ ë ˆëª¬ AI", place: "ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?", theme: "ko" },
    zh: { logo: "èœ‚èœœæŸ æª¬AI", place: "æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®ä½ çš„å—ï¼Ÿ", theme: "zh" },
    fr: { logo: "CITRON MIEL AI", place: "Comment puis-je vous aider ?", theme: "fr" },
    es: { logo: "LIMÃ“N MIEL AI", place: "Â¿CÃ³mo puedo ayudarte?", theme: "es" }
  };

  function toggleTheme() {
    const isDark = document.body.classList.toggle('dark');
    document.getElementById('themeBtn').innerText = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
  }

  function updateUI() {
    const lang = document.getElementById('langSelect').value;
    const config = i18n[lang];
    document.getElementById('ui-logo')?.innerText || (document.querySelector('.logo-text').innerText = config.logo);
    document.getElementById('input').placeholder = config.place;
    addMsg(`System: ${lang.toUpperCase()} mode activated.`, 'ai');
  }

  async function handleFile() {
    const file = document.getElementById('fileInput').files[0];
    if (!file) return;
    currentFile.name = file.name;
    document.getElementById('file-status').innerText = `READY: ${file.name.toUpperCase()}`;
    // â€»ã“ã“ã«PDF.jsã‚„FileReaderã®è§£æãƒ­ã‚¸ãƒƒã‚¯ãŒå…¥ã‚Šã¾ã™
  }

  async function run() {
    const mode = document.getElementById('modeSelect').value;
    if (mode === 'image') {
      if (imageCount <= 0) {
        addMsg("ç”»åƒç”Ÿæˆã®åˆ¶é™ã§ã™ï¼ˆ1åˆ†å¾Œã«å›å¾©ã—ã¾ã™ï¼‰ã€‚", "ai");
        return;
      }
      imageCount--;
      document.getElementById('rate-display').innerText = `RATE: ${imageCount} / 4 (FREE)`;
    }

    const input = document.getElementById('input');
    const userText = input.value;
    if (!userText && !currentFile.name) return;

    addMsg(userText || `File: ${currentFile.name}`, 'user');
    input.value = "";

    // APIãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†ï¼ˆã“ã“ã«fetchã‚’æ›¸ãï¼‰
    // payloadã« lang, personality, mode ã‚’å«ã‚ã¦é€ä¿¡ã—ã¾ã™
  }

  function addMsg(t, type) {
    const b = document.getElementById('chat-box');
    const d = document.createElement('div');
    d.className = `msg ${type}`; d.innerText = t;
    b.appendChild(d); b.scrollTop = b.scrollHeight;
  }
</script>
</body>
</html>
