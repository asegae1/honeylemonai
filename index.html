<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>honeylemonai - Pro</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
  <style>
    /* CSSå¤‰æ•°ã¨åŸºæœ¬ãƒ‡ã‚¶ã‚¤ãƒ³ */
    :root { 
      --main: #FFD700; --accent: #FFA500; --bg: #fffdf0; --panel: #ffffff; --sidebar: #f7f2d7; --txt: #333; 
      --radius: 12px;
    }
    body.dark { 
      --main: #FFD700; --accent: #FF8C00; --bg: #0f0f0f; --panel: #1e1e1e; --sidebar: #151515; --txt: #f0f0f0; 
    }

    body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--txt); margin: 0; height: 100vh; display: flex; transition: 0.3s; overflow: hidden; }
    
    /* ã‚µã‚¤ãƒ‰ãƒãƒ¼ */
    .sidebar { width: 240px; background: var(--sidebar); display: flex; flex-direction: column; border-right: 1px solid rgba(0,0,0,0.05); }
    .sidebar-header { padding: 15px; font-weight: 900; color: var(--accent); display: flex; justify-content: space-between; }
    .history-list { flex: 1; overflow-y: auto; padding: 10px; font-size: 13px; }

    /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
    .main-container { flex: 1; display: flex; flex-direction: column; }
    
    /* ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ« */
    .top-nav { background: var(--panel); padding: 10px 20px; border-bottom: 1px solid rgba(0,0,0,0.05); }
    .settings-grid { display: grid; grid-template-columns: 1fr 2fr 1fr 1fr; gap: 10px; align-items: center; }
    
    .label-xs { font-size: 9px; font-weight: bold; color: var(--accent); display: block; margin-bottom: 2px; }
    select, input[type="text"] { border: 1.5px solid rgba(0,0,0,0.1); border-radius: 8px; padding: 6px; font-size: 12px; background: var(--bg); color: var(--txt); width: 100%; outline: none; }

    /* å›ç­”ã‚¨ãƒªã‚¢ (è¤‡æ•°å›ç­”å¯¾å¿œ) */
    #chat-box { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; }
    .response-group { display: grid; gap: 10px; width: 100%; }
    .grid-2 { grid-template-columns: 1fr 1fr; }
    .grid-4 { grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr; }

    .msg { padding: 15px; border-radius: var(--radius); font-size: 14px; line-height: 1.5; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
    .user { align-self: flex-end; background: var(--main); color: #fff; max-width: 70%; }
    .ai { background: var(--panel); border: 1px solid rgba(0,0,0,0.1); }

    /* å…¥åŠ›ã‚¨ãƒªã‚¢ */
    .input-wrapper { background: var(--panel); padding: 15px 30px; border-top: 1px solid rgba(0,0,0,0.05); }
    .input-row { max-width: 900px; margin: 0 auto; display: flex; align-items: center; gap: 10px; }
    #input { flex: 1; padding: 12px 20px; border-radius: 25px; border: 2px solid var(--bg); background: var(--bg); color: var(--txt); }
    .lemon-btn { background: var(--main); border: none; width: 45px; height: 45px; border-radius: 50%; cursor: pointer; font-size: 20px; }
  </style>
</head>
<body class="light">

<div class="sidebar">
  <div class="sidebar-header">ğŸ‹ honeylemonai <button onclick="document.body.classList.toggle('dark')" style="border:none; background:none; cursor:pointer;">ğŸŒ“</button></div>
  <div style="padding: 10px;"><button style="width:100%; padding:8px; border-radius:8px; border:none; background:var(--main); cursor:pointer;" onclick="location.reload()">+ New Chat</button></div>
  <div class="history-list" id="history-list"></div>
</div>

<div class="main-container">
  <div class="top-nav">
    <div class="settings-grid">
      <div>
        <span class="label-xs">LANGUAGE</span>
        <select id="langSelect"><option value="ja">æ—¥æœ¬èª</option><option value="en">English</option></select>
      </div>
      <div>
        <span class="label-xs">PERSONALITY</span>
        <input type="text" id="personalityInput" placeholder="æ€§æ ¼è¨­å®š...">
      </div>
      <div>
        <span class="label-xs">LENGTH</span>
        <select id="lengthSelect">
          <option value="short">Short (ç°¡æ½”)</option>
          <option value="medium" selected>Medium (æ¨™æº–)</option>
          <option value="long">Long (è©³ç´°)</option>
        </select>
      </div>
      <div>
        <span class="label-xs">BATCH</span>
        <select id="batchSelect">
          <option value="1">1x (Single)</option>
          <option value="2">2x (Dual)</option>
          <option value="4">4x (Quad)</option>
        </select>
      </div>
    </div>
  </div>

  <div id="chat-box"></div>

  <div class="input-wrapper">
    <div class="input-row">
      <label style="cursor:pointer; font-size:20px;">ğŸ“<input type="file" id="fileInput" style="display:none"></label>
      <input id="input" type="text" placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›..." onkeypress="if(event.key==='Enter') run()">
      <button class="lemon-btn" onclick="run()">ğŸ‹</button>
    </div>
  </div>
</div>

<script>
  async function run() {
    const input = document.getElementById('input');
    const text = input.value;
    const batch = parseInt(document.getElementById('batchSelect').value);
    const length = document.getElementById('lengthSelect').value;
    
    if(!text) return;
    addMsg(text, 'user');
    input.value = "";

    // å›ç­”è¡¨ç¤ºç”¨ã®ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½œæˆ
    const group = document.createElement('div');
    group.className = `response-group ${batch === 2 ? 'grid-2' : batch === 4 ? 'grid-4' : ''}`;
    document.getElementById('chat-box').appendChild(group);

    // å›ç­”æ•°(1x, 2x, 4x)ã ã‘ãƒ«ãƒ¼ãƒ—ã‚’å›ã™
    for(let i=0; i<batch; i++) {
      const aiDiv = document.createElement('div');
      aiDiv.className = 'msg ai';
      aiDiv.innerText = `Generating ${i+1}... (Length: ${length})`;
      group.appendChild(aiDiv);
      
      // ã“ã“ã§æœ¬æ¥ã¯ fetch ã‚’å‘¼ã³å‡ºã—
      // ãã®éš›ã€bodyã« { length: length, personality: ... } ã‚’å«ã‚ã‚‹
    }
    document.getElementById('chat-box').scrollTop = document.getElementById('chat-box').scrollHeight;
  }

  function addMsg(t, type) {
    const b = document.getElementById('chat-box');
    const d = document.createElement('div');
    d.className = `msg ${type}`; d.innerText = t;
    b.appendChild(d);
    b.scrollTop = b.scrollHeight;
  }
</script>
</body>
</html>
